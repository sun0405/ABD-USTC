# Buffer Management

旨在: 最小化磁盘的I/O次数, 保持最可能被访问的在内存中.

## 缓冲区结构





## 缓冲区替换策略

### 理论最优算法: OPT算法

OPT算法也称为Belady's算法

每次都置换以后永远也用不到的页面, 若没有则淘汰最久以后再用到的页面; OPT算法必须预先知道全部的页面访问序列, 但再实际的DBMS/OS中是无法实现的, 因此仅有理论意义.

作用: 可以在实验中作为算法性能的上界加以对比

### LRU

所以的frame按照最近一次访问时间排列成一个链表

LRU----()----()----()-- <---MRU

基于时间局部性假设: 越是最近访问的在未来被访问的概率越高, 总是替换LRU端的frame

优点:

- 能很好地作用于流行的页面
- 在置换时的复杂度是O(1)

缺点:

- 缓存污染, LRU+重复序列扫描, 因为它只考虑最近的一次访问时间.
- 开销: 每次都要修改LRU列表
- 如果访问不满足时间局部性则性能较差
- 如果仅考虑最近一次访问, 则不考虑访问频率

### LRU-K

在LRU基础上考虑了频率问题

如果某个frame的访问次数达到了k次以上, 则应当尽量不置换

- 维护2个LRU链表, 一个是访问次数小于K的, 一个是访问次数K次以上的
- 优先安装LRU策略置换小于K次的链表
- 保证高频访问的页能够尽量在BUFFER中
- K并非越大越好, 一般为2即可
- 缺点: 需要额外记录访问次数

### 2Q

与LRU-2类似,但不同的地方在于访问一次的队列使用FIFO, 而不是LRU.



### CLOCK

